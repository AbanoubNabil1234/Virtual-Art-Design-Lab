import { Injectable, signal } from '@angular/core';

export interface ContentPage {
    id: string;
    title: string;
    content: string; // Plain text or HTML for search
    route: string;
    category: 'تعريفات' | 'اهداف' | 'مفاهيم';
}

@Injectable({
    providedIn: 'root'
})
export class ContentService {
    private pages = signal<ContentPage[]>([
        {
            id: 'virtual-lab',
            title: 'المعمل الافتراضي (Virtual Lab)',
            content: 'يمكن تعريف المعمل الافتراضي بأنه بيئة تعليمية رقمية تفاعلية من تصميم الباحث، تُستخدم في تدريس التربية الفنية لطلاب المرحلة الثانوية، وتُحاكي مواقف التعلم الواقعية المرتبطة بعمليات التصميم الفني، من خلال مجموعة من الأنشطة والتطبيقات الافتراضية التي تتيح للطلاب ممارسة مهارات التصميم، والتجريب، والتعديل، والتكرار داخل بيئة آمنة، ويتم قياس أثرها في تنمية مفاهيم ومهارات التصميم لدى الطلاب من خلال أدوات الدراسة. ومعالجة المواقف اللغوية، والقدرة على تفسير الأفكار بطرق متعددة، وإنتاج حلول أو تعبيرات متنوعة.',
            route: '/definition/virtual-lab',
            category: 'تعريفات'
        },
        {
            id: 'design-skills',
            title: 'مهارات التصميم (Design Skills)',
            content: 'تعرف بأنها قدرة طلاب المرحلة الثانوية على الأداء العملي لمهام التصميم الفني بكفاءة، والتي تتمثل في توظيف عناصر التصميم وتنظيمها داخل عمل فني متكامل، وتشمل مهارات التخطيط، والتنفيذ، والتعديل، والإخراج الفني، وفق معايير محددة في بطاقة ملاحظة أعدتها الباحث، ويتم قياسها قبل وبعد تطبيق المعمل الافتراضي.',
            route: '/definition/skills',
            category: 'تعريفات'
        },
        {
            id: 'design-concepts',
            title: 'مفاهيم التصميم (Design Concepts)',
            content: 'تعرف بأنها مجموعة المعارف والمفاهيم الأساسية المرتبطة بالتصميم في مادة التربية الفنية، والتي تشمل (مثل: الخط، الشكل، اللون، التوازن، التناسب، الإيقاع، الوحدة)، والمحددة في قائمة أعدتها الباحث، ويُقاس مستوى اكتسابها لدى طلاب المرحلة الثانوية من خلال الاختبار التحصيلي المعد لهذا الغرض قبل وبعد تطبيق المعمل الافتراضي.',
            route: '/definition/concepts',
            category: 'مفاهيم'
        },
        {
            id: 'general-goals',
            title: 'أهداف استخدام المعامل الافتراضية في تدريس التربية الفنية',
            content: `
                <ul>
                    <li>إتاحة بيئة تعلم تفاعلية قائمة على المحاكاة والتجريب.</li>
                    <li>تنمية مفاهيم التصميم الفني ومهاراته لدى طلاب المرحلة الثانوية.</li>
                    <li>تبسيط المفاهيم الفنية المجردة، ودعم التعلم القائم على الممارسة والتجريب الذاتي.</li>
                    <li>تعزيز دافعية الطلاب نحو التعلم، بما ينعكس إيجابًا على مستوى أدائهم التصميمي واتجاهاتهم نحو مادة التربية الفنية.</li>
                    <li>التعرف على البرمجيات التعليمية المتنوعة وكيفية توظيفها في مجال التصميم الفني.</li>
                    <li>تطوير مهارات حل المشكلات الفنية والإبداعية.</li>
                    <li>تبسيط المفاهيم الفنية وتقديمها بطريقة مشوقة وجاذبة للطلاب.</li>
                    <li>القدرة على ترجمة المفاهيم الفنية إلى واقع ملموس يدركه المتعلم.</li>
                    <li>معالجة نقاط ضعف الطلاب وتمكينهم من تطوير مهارات التصميم الفني بشكل فعال.</li>
                    <li>تعزيز شعور الطلاب بالراحة والاسترخاء أثناء تنفيذ الأنشطة الافتراضية.</li>
                    <li>تمكين الطلاب من تصميم وتجميع أجزاء التجارب الفنية بأنفسهم للحصول على نتائج إبداعية ذات معنى.</li>
                    <li>تحسين إجراءات السلامة أثناء تنفيذ التجارب الفنية، مما يسمح بتنفيذ تجارب قد تكون خطرة في المعامل التقليدية.</li>
                    <li>تكوين اتجاهات إيجابية نحو دراسة الفنون وتنمية القدرة على التفكير الاستنتاجي من خلال وضع فرضيات واختبارها عمليًا عبر المحاكاة.</li>
                </ul>
            `,
            route: '/general-goals',
            category: 'اهداف'
        }
    ]);

    getPages() {
        return this.pages;
    }

    getPage(id: string) {
        return this.pages().find(p => p.id === id);
    }

    searchContent(query: string) {
        const q = query.toLowerCase();
        return this.pages().filter(p =>
            p.title.includes(q) || p.content.includes(q)
        );
    }
}
